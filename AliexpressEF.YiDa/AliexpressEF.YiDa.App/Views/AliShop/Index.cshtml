@model IEnumerable<AliexpressEF.YiDa.Domain.AliShopType>
@{
    ViewBag.Title = "Index";
}
<body class="easyui-layout">
    <script language="javascript" type="text/javascript">
        $(function () {
            $('#dg').datagrid({
                url: '@Url.Action("List", "AliShop")',
                pageNumber: 1,
                pageSize: 20,
                pageList: [20, 40, 60, 80, 100]
            });

        });

        //新建
        function c_dlg() {
            var url_str = '@Url.Action("Create", "AliShop")';
            showdlg(url_str, 'c_dlg', ajaxAdd);
        }

        //编辑框
        function e_dlg() {
            var url = '@Url.Action("Edit", "AliShop")/' + id;
            if (id != undefined) {
                var url = '@Url.Action("Edit", "Module")/' + id;
                showdlg(url, 'e_dlg', ajaxEdit);
            }
        }

        //异步新建提交
        function ajaxAdd() {
            //$('#c_form').submit();
            ajaxFrom('c_form', '@Url.Action("Create", "AliShop")');
        }
        //异步修改提交
        function ajaxEdit() {
            ajaxFrom('e_form', '@Url.Action("Edit", "AliShop")');
        }



        function doSearch() {
            search = $('#txtSearch').searchbox("getName") + "&" + $('#txtSearch').searchbox("getValue") + "^";
            $("#dg").datagrid("load", {
                search: search
            });
        }


    </script>
    <div region="center">
        <table id="dg" class="easyui-datagrid"
            toolbar="#toolbar"
            rownumbers="true" fitcolumns="true" singleselect="true" pagination="true" fit="true">
            <thead>
                <tr>
                    <th field="Id" width="100">Id
                    </th>

                    <th field="ShopTitle" width="100">店铺名称
                    </th>

                    <th field="RefreshToken" width="100">更新Token
                    </th>

                    <th field="AccessToken" width="100">账户Token
                    </th>

                    <th field="Manager" width="100">店铺负责人
                    </th>

                    <th field="Phone" width="100">电话
                    </th>

                    <th field="Status" width="100">状态
                    </th>

                    <th field="BeginOn" width="100">开始时间
                    </th>

                    <th field="EndOn" width="100">结束时间
                    </th>

                    <th field="CanNum" width="100">可打印数量
                    </th>

                    <th field="TokenUpdateOn" width="100">Token更新时间
                    </th>

                    <th field="ReturnName" width="100">回邮接收人
                    </th>

                    <th field="ReturnAddress" width="100">回邮地址
                    </th>


                </tr>
            </thead>
        </table>
        <div id="toolbar">
            <div></div>
            <div style="float:right"> <a href="#" class="easyui-linkbutton" iconcls="icon-add" onclick="c_dlg();">新建</a>
            <a href="#" class="easyui-linkbutton" iconcls="icon-edit" onclick="e_dlg()">编辑</a>
            <a href="#" class="easyui-linkbutton" iconcls="icon-remove" onclick="del();">删除</a></div>
            
            <div>
            店铺:<input type="text" id="txtSearch" code="ShopTitle" />
            <a href="#" class="easyui-linkbutton" iconcls="icon-search" onclick="doSearch();">查询</a></div>
        </div>
        <div id="mm" style="width: 120px">
            <div data-options="name:'ShopTitle'">店铺名称</div>
        </div>
        <div id="c_dlg"></div>
        <div id="e_dlg"></div>

    </div>
</body>
